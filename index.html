<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đề Kiểm Tra Cuối Kỳ 1 - Toán 11 (Theo Ma Trận)</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --success-color: #28a745;
            --error-color: #dc3545;
            --bg-color: #f4f6f9;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding-bottom: 80px; /* Space for footer/button */
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* --- Header & Timer --- */
        .sticky-header {
            position: sticky;
            top: 0;
            background: #fff;
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--primary-color);
        }

        .timer-box {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--error-color);
            background: #fff0f0;
            padding: 5px 15px;
            border-radius: 5px;
            border: 1px solid var(--error-color);
        }

        h1 { text-align: center; color: var(--primary-color); margin-bottom: 5px; }
        h2 { border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 40px; color: #444; }
        .part-header { background: #e7f1ff; padding: 10px 15px; border-radius: 5px; border-left: 5px solid var(--primary-color); margin-bottom: 20px; font-weight: bold; }

        /* --- Question Styles --- */
        .question-block {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fff;
            transition: all 0.3s ease;
        }
        .question-block:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .q-title { font-weight: 700; margin-bottom: 15px; display: block; }
        
        /* --- Tables for Statistics --- */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95rem;
        }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f8f9fa; color: var(--primary-color); }

        /* --- Input & Options --- */
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .option-label {
            display: flex; align-items: center; cursor: pointer;
            padding: 8px; border-radius: 4px; border: 1px solid transparent;
        }
        .option-label:hover { background: #f0f0f0; }
        input[type="radio"] { margin-right: 10px; transform: scale(1.2); }
        
        /* True/False Grid */
        .tf-row {
            display: grid;
            grid-template-columns: 1fr 80px 80px;
            gap: 10px;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .tf-header { font-weight: bold; background: #f8f9fa; padding: 10px 0; }
        
        /* Short Answer Input */
        .short-ans-input {
            width: 100%; max-width: 300px;
            padding: 10px;
            font-size: 1rem;
            border: 2px solid #ccc;
            border-radius: 5px;
            margin-top: 10px;
        }

        /* --- Results & Feedback --- */
        .result-box {
            display: none;
            text-align: center;
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
        }
        .score-number { font-size: 2.5rem; font-weight: bold; color: #28a745; }
        
        .correct-block { border-left: 5px solid var(--success-color); background-color: #f6fff9; }
        .wrong-block { border-left: 5px solid var(--error-color); background-color: #fff6f6; }
        
        .explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #fff3cd;
            color: #856404;
            border-radius: 5px;
            font-size: 0.95rem;
        }
        .explanation strong { color: #533f03; }

        /* --- Footer Button --- */
        .footer-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: white; padding: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .btn-submit {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn-submit:hover { background-color: #004085; }
        .btn-submit:disabled { background-color: #ccc; cursor: not-allowed; }

        @media (max-width: 768px) {
            .options-grid { grid-template-columns: 1fr; }
            .container { padding: 20px; margin: 10px; }
        }
    </style>
</head>
<body>

    <div class="sticky-header">
        <div style="font-weight: bold; font-size: 1.1rem;">ĐỀ TOÁN 11 - HK1</div>
        <div class="timer-box" id="timer">60:00</div>
    </div>

    <div class="container">
        <h1>KIỂM TRA CUỐI KỲ 1</h1>
        <p style="text-align: center; color: #666;">Thời gian làm bài: 60 phút | Hình thức: Trực tuyến</p>
        
        <div id="resultBoard" class="result-box">
            <h3>KẾT QUẢ BÀI LÀM</h3>
            <div class="score-number" id="finalScore">0.0</div>
            <p>Điểm thang 10</p>
            <p><i>Kéo xuống dưới để xem đáp án chi tiết.</i></p>
        </div>

        <form id="quizForm">
            <div class="part-header">PHẦN I: TRẮC NGHIỆM NHIỀU LỰA CHỌN (3,0 điểm)<br><small>Gồm 10 câu hỏi, mỗi câu chọn 1 phương án đúng nhất.</small></div>

            <div class="question-block" id="q1">
                <span class="q-title">Câu 1: Công thức lượng giác nào sau đây đúng?</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q1" value="A"> A. sin(a - b) = sin a cos b + cos a sin b</label>
                    <label class="option-label"><input type="radio" name="p1_q1" value="B"> B. cos(a - b) = cos a cos b + sin a sin b</label>
                    <label class="option-label"><input type="radio" name="p1_q1" value="C"> C. cos(a + b) = cos a cos b + sin a sin b</label>
                    <label class="option-label"><input type="radio" name="p1_q1" value="D"> D. sin 2a = sin a cos a</label>
                </div>
                <div class="explanation"><strong>Đáp án B.</strong> Công thức cộng cos: cos hiệu bằng cos cos cộng sin sin.</div>
            </div>

            <div class="question-block" id="q2">
                <span class="q-title">Câu 2: Nghiệm của phương trình cot x = √3 là:</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q2" value="A"> A. x = π/6 + kπ</label>
                    <label class="option-label"><input type="radio" name="p1_q2" value="B"> B. x = π/3 + kπ</label>
                    <label class="option-label"><input type="radio" name="p1_q2" value="C"> C. x = π/6 + k2π</label>
                    <label class="option-label"><input type="radio" name="p1_q2" value="D"> D. x = -π/6 + kπ</label>
                </div>
                <div class="explanation"><strong>Đáp án A.</strong> cot(π/6) = √3. Chu kỳ của cot là kπ.</div>
            </div>

            <div class="question-block" id="q3">
                <span class="q-title">Câu 3: Cho cấp số cộng (u<sub>n</sub>) có u<sub>1</sub> = -3, d = 2. Tìm u<sub>10</sub>?</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q3" value="A"> A. 15</label>
                    <label class="option-label"><input type="radio" name="p1_q3" value="B"> B. 17</label>
                    <label class="option-label"><input type="radio" name="p1_q3" value="C"> C. 13</label>
                    <label class="option-label"><input type="radio" name="p1_q3" value="D"> D. -1</label>
                </div>
                <div class="explanation"><strong>Đáp án A.</strong> u<sub>10</sub> = u<sub>1</sub> + 9d = -3 + 9(2) = 15.</div>
            </div>

            <div class="question-block" id="q4">
                <span class="q-title">Câu 4: Dãy số nào sau đây là cấp số nhân?</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q4" value="A"> A. 1, 3, 5, 7</label>
                    <label class="option-label"><input type="radio" name="p1_q4" value="B"> B. 2, 4, 8, 16</label>
                    <label class="option-label"><input type="radio" name="p1_q4" value="C"> C. 1, 1/2, 1/4, 1/6</label>
                    <label class="option-label"><input type="radio" name="p1_q4" value="D"> D. 3, 3, 3, 0</label>
                </div>
                <div class="explanation"><strong>Đáp án B.</strong> Các số hạng sau gấp đôi số hạng trước (q=2).</div>
            </div>

            <div class="question-block" id="q5">
                <span class="q-title">Câu 5: Tính giới hạn L = lim (2n + 1)/(n - 3).</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q5" value="A"> A. L = 2</label>
                    <label class="option-label"><input type="radio" name="p1_q5" value="B"> B. L = -1/3</label>
                    <label class="option-label"><input type="radio" name="p1_q5" value="C"> C. L = 1</label>
                    <label class="option-label"><input type="radio" name="p1_q5" value="D"> D. L = +∞</label>
                </div>
                <div class="explanation"><strong>Đáp án A.</strong> Bậc tử = bậc mẫu, lấy hệ số cao nhất chia nhau: 2/1 = 2.</div>
            </div>

            <div class="question-block" id="q6">
                <span class="q-title">Câu 6: Giới hạn lim<sub>x→1</sub> (x² + 2x - 3) bằng:</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q6" value="A"> A. 3</label>
                    <label class="option-label"><input type="radio" name="p1_q6" value="B"> B. -3</label>
                    <label class="option-label"><input type="radio" name="p1_q6" value="C"> C. 0</label>
                    <label class="option-label"><input type="radio" name="p1_q6" value="D"> D. 1</label>
                </div>
                <div class="explanation"><strong>Đáp án C.</strong> Thay x=1 vào hàm số: 1² + 2(1) - 3 = 0.</div>
            </div>

            <div class="question-block" id="q7">
                <span class="q-title">Câu 7: Hàm số y = f(x) liên tục tại điểm x₀ khi nào?</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q7" value="A"> A. lim<sub>x→x₀</sub> f(x) = f(x₀)</label>
                    <label class="option-label"><input type="radio" name="p1_q7" value="B"> B. lim<sub>x→x₀</sub> f(x) = 0</label>
                    <label class="option-label"><input type="radio" name="p1_q7" value="C"> C. f(x₀) không xác định</label>
                    <label class="option-label"><input type="radio" name="p1_q7" value="D"> D. lim<sub>x→x₀+</sub> f(x) ≠ lim<sub>x→x₀-</sub> f(x)</label>
                </div>
                <div class="explanation"><strong>Đáp án A.</strong> Đây là định nghĩa hàm số liên tục tại 1 điểm.</div>
            </div>

            <div class="question-block" id="q8">
                <span class="q-title">Câu 8: Trong không gian, hai đường thẳng a và b chéo nhau khi:</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q8" value="A"> A. Chúng không có điểm chung.</label>
                    <label class="option-label"><input type="radio" name="p1_q8" value="B"> B. Chúng không cùng nằm trong một mặt phẳng.</label>
                    <label class="option-label"><input type="radio" name="p1_q8" value="C"> C. Chúng song song với nhau.</label>
                    <label class="option-label"><input type="radio" name="p1_q8" value="D"> D. Chúng cắt nhau.</label>
                </div>
                <div class="explanation"><strong>Đáp án B.</strong> Chéo nhau nghĩa là không đồng phẳng (không thể xác định mặt phẳng chứa cả 2).</div>
            </div>

            <div class="question-block" id="q9">
                <span class="q-title">Câu 9: Cho hình chóp tứ giác đều S.ABCD. Khẳng định nào đúng về quan hệ song song?</span>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q9" value="A"> A. AB // (SCD)</label>
                    <label class="option-label"><input type="radio" name="p1_q9" value="B"> B. AD // (SAB)</label>
                    <label class="option-label"><input type="radio" name="p1_q9" value="C"> C. SA // BC</label>
                    <label class="option-label"><input type="radio" name="p1_q9" value="D"> D. (SAB) // (SCD)</label>
                </div>
                <div class="explanation"><strong>Đáp án A.</strong> Vì ABCD là hình vuông/chữ nhật nên AB // CD. Mà CD ⊂ (SCD) nên AB // (SCD).</div>
            </div>

            <div class="question-block" id="q10">
                <span class="q-title">Câu 10: Cho bảng số liệu ghép nhóm về chiều cao của 40 học sinh. Nhóm chứa Mốt (Mode) là nhóm nào?</span>
                <table>
                    <tr><th>Chiều cao (cm)</th><th>Số học sinh</th></tr>
                    <tr><td>[150; 155)</td><td>4</td></tr>
                    <tr><td>[155; 160)</td><td>10</td></tr>
                    <tr><td>[160; 165)</td><td>15</td></tr>
                    <tr><td>[165; 170)</td><td>8</td></tr>
                    <tr><td>[170; 175)</td><td>3</td></tr>
                </table>
                <div class="options-grid">
                    <label class="option-label"><input type="radio" name="p1_q10" value="A"> A. [155; 160)</label>
                    <label class="option-label"><input type="radio" name="p1_q10" value="B"> B. [160; 165)</label>
                    <label class="option-label"><input type="radio" name="p1_q10" value="C"> C. [165; 170)</label>
                    <label class="option-label"><input type="radio" name="p1_q10" value="D"> D. [150; 155)</label>
                </div>
                <div class="explanation"><strong>Đáp án B.</strong> Nhóm [160; 165) có tần số lớn nhất là 15.</div>
            </div>

            <div class="part-header">PHẦN II: TRẮC NGHIỆM ĐÚNG/SAI (4,0 điểm)<br><small>Gồm 3 câu hỏi, mỗi câu có 4 ý a,b,c,d. Học sinh chọn Đúng hoặc Sai cho từng ý.</small></div>

            <div class="question-block" id="q11">
                <span class="q-title">Câu 11: Cho phương trình lượng giác: 2sin²x - sin x - 1 = 0.</span>
                <div class="tf-row tf-header">
                    <div>Mệnh đề</div><div>Đúng</div><div>Sai</div>
                </div>
                <div class="tf-row">
                    <div>a) Phương trình tương đương với: sin x = 1 hoặc sin x = -1/2.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_a" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_a" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>b) Phương trình có nghiệm x = π/2 + kπ.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_b" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_b" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>c) Trong khoảng (0; π), phương trình có đúng 1 nghiệm.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_c" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_c" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>d) Nghiệm âm lớn nhất của phương trình là x = -π/6.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_d" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q11_d" value="False"></div>
                </div>
                <div class="explanation">
                    <strong>Đáp án chi tiết:</strong><br>
                    a) <strong>Đúng</strong>. (a-b+c=0 => sin x = 1, sin x = -0.5).<br>
                    b) <strong>Sai</strong>. Nghiệm sin x=1 là π/2 + k2π.<br>
                    c) <strong>Đúng</strong>. Trên (0; π) chỉ có nghiệm x=π/2 (sin x = -1/2 nghiệm âm).<br>
                    d) <strong>Đúng</strong>. Nghiệm của sin x = -1/2 là -π/6 + k2π.
                </div>
            </div>

            <div class="question-block" id="q12">
                <span class="q-title">Câu 12: Cho hình chóp S.ABCD có đáy là hình bình hành tâm O. Gọi M, N lần lượt là trung điểm của SA và CD.</span>
                <div class="tf-row tf-header">
                    <div>Mệnh đề</div><div>Đúng</div><div>Sai</div>
                </div>
                <div class="tf-row">
                    <div>a) Đường thẳng ON song song với mặt phẳng (SBC).</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_a" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_a" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>b) Đường thẳng MN song song với mặt phẳng (SBC).</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_b" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_b" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>c) Giao tuyến của (SAC) và (SBD) là đường thẳng SO.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_c" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_c" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>d) Thiết diện của hình chóp cắt bởi mp (MNC) là hình thang.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_d" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q12_d" value="False"></div>
                </div>
                <div class="explanation">
                    <strong>Giải thích:</strong><br>
                    a) <strong>Đúng</strong>. ON là đường trung bình tam giác BCD => ON // BC. Mà BC ⊂ (SBC).<br>
                    b) <strong>Sai</strong>. MN cắt (SBC) (không song song).<br>
                    c) <strong>Đúng</strong>.<br>
                    d) <strong>Đúng</strong>. MN // SC? Không. (MNC) chứa CD. Giao tuyến với (SAB) qua M và // CD // AB. Thiết diện là hình thang AM...
                </div>
            </div>

            <div class="question-block" id="q13">
                <span class="q-title">Câu 13: Thống kê điểm thi Toán của 50 học sinh lớp 11A được cho trong bảng sau:</span>
                <table>
                    <tr><th>Điểm số</th><th>[4; 6)</th><th>[6; 8)</th><th>[8; 10)</th></tr>
                    <tr><th>Số HS</th><td>10</td><td>25</td><td>15</td></tr>
                </table>
                <div class="tf-row tf-header">
                    <div>Mệnh đề</div><div>Đúng</div><div>Sai</div>
                </div>
                <div class="tf-row">
                    <div>a) Cỡ mẫu là N = 40.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_a" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_a" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>b) Số học sinh đạt điểm giỏi (từ 8 trở lên) chiếm 30%.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_b" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_b" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>c) Nhóm chứa trung vị là nhóm [6; 8).</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_c" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_c" value="False"></div>
                </div>
                <div class="tf-row">
                    <div>d) Giá trị đại diện của nhóm [4; 6) là 4.5.</div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_d" value="True"></div>
                    <div style="text-align: center;"><input type="radio" name="p2_q13_d" value="False"></div>
                </div>
                <div class="explanation">
                    <strong>Giải thích:</strong><br>
                    a) <strong>Sai</strong>. Tổng = 10+25+15 = 50.<br>
                    b) <strong>Đúng</strong>. 15/50 = 0.3 = 30%.<br>
                    c) <strong>Đúng</strong>. N/2 = 25. Tần số tích lũy: nhóm 1 (10), nhóm 2 (10+25=35). Vị trí 25 nằm ở nhóm [6;8).<br>
                    d) <strong>Sai</strong>. Giá trị đại diện = (4+6)/2 = 5.
                </div>
            </div>

            <div class="part-header">PHẦN III: TRẢ LỜI NGẮN (3,0 điểm)<br><small>Gồm 3 câu hỏi. Học sinh tính toán và điền kết quả (số hoặc phân số tối giản).</small></div>

            <div class="question-block" id="q14">
                <span class="q-title">Câu 14: (Toán thực tế)</span>
                <p>Một người thả 1 quả bóng cao su từ độ cao 20m. Mỗi lần chạm đất, bóng nảy lên độ cao bằng 3/4 độ cao lần rơi trước đó. Giả sử bóng nảy mãi mãi, tính tổng quãng đường bóng di chuyển (lên và xuống) cho đến khi dừng hẳn? (Kết quả làm tròn đến hàng đơn vị).</p>
                <input type="number" class="short-ans-input" id="p3_q14" placeholder="Nhập đáp án...">
                <div class="explanation">
                    <strong>Đáp án: 140</strong>.<br>
                    Quãng đường rơi: Lùi vô hạn u1=20, q=3/4 -> S1 = 20/(1-0.75) = 80.<br>
                    Quãng đường lên: Lùi vô hạn u1=15, q=3/4 -> S2 = 15/(1-0.75) = 60.<br>
                    Tổng = 140m. (Hoặc công thức nhanh: H*(1+q)/(1-q)).
                </div>
            </div>

            <div class="question-block" id="q15">
                <span class="q-title">Câu 15: (Thống kê)</span>
                <p>Dựa vào bảng số liệu ở Câu 10 (Phần 1), hãy tính giá trị của Mốt (M₀). (Làm tròn đến 1 chữ số thập phân).</p>
                <input type="text" class="short-ans-input" id="p3_q15" placeholder="Ví dụ: 162.5">
                <div class="explanation">
                    <strong>Đáp án: 161.4</strong>.<br>
                    Nhóm mốt [160; 165). u_m=160, n_m=15, n_{m-1}=10, n_{m+1}=8, h=5.<br>
                    Mo = 160 + ((15-10)/((15-10)+(15-8))) * 5 = 160 + (5/12)*5 ≈ 162.08 -> 162.1.<br>
                    (Lưu ý: Công thức SGK mới: (n_m - n_m-1) / ...). Nếu dùng công thức cũ hoặc cách tính khác có thể lệch.
                    Đáp án chấp nhận: <strong>162.1</strong> (Tính lại: 5/(5+7) * 5 = 25/12 = 2.08).
                </div>
            </div>

            <div class="question-block" id="q16">
                <span class="q-title">Câu 16: (Hình học)</span>
                <p>Cho hình chóp S.ABCD có đáy là hình bình hành. Gọi I là trung điểm SC. Mặt phẳng (P) qua AI và song song với BD cắt SB, SD lần lượt tại M, N. Tính tỉ số diện tích của đa giác thiết diện tạo bởi (P) so với diện tích đáy ABCD? (Nhập kết quả dưới dạng số thập phân).</p>
                <p><i>(Câu hỏi thay thế đơn giản hơn để phù hợp đại trà: Tính tỉ số k = V(S.AMIN) / V(S.ABCD))</i>. 
                <br><b>Câu hỏi chốt:</b> Cho tứ diện S.ABC. Gọi M, N lần lượt thuộc SA, SB sao cho SA = 3SM, SB = 3SN. Mặt phẳng (MNC) chia khối chóp thành 2 phần. Tỉ số thể tích phần chứa đỉnh S và phần còn lại là bao nhiêu? (Dạng a/b).</p>
                <input type="text" class="short-ans-input" id="p3_q16" placeholder="Nhập phân số a/b...">
                <div class="explanation">
                    <strong>Đáp án: 1/8</strong>.<br>
                    V(S.MNC)/V(S.ABC) = (SM/SA)*(SN/SB)*(SC/SC) = (1/3)*(1/3)*1 = 1/9.<br>
                    Vậy phần trên là 1 phần, tổng là 9 phần => phần dưới là 8 phần.<br>
                    Tỉ số là 1/8.
                </div>
            </div>

        </form>
    </div>

    <div class="footer-bar">
        <button class="btn-submit" onclick="submitQuiz()">NỘP BÀI & XEM KẾT QUẢ</button>
    </div>

    <script>
        // --- Timer Logic ---
        let timeRemaining = 3600; // 60 minutes
        const timerDisplay = document.getElementById('timer');
        
        const timerInterval = setInterval(() => {
            timeRemaining--;
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            
            if (timeRemaining <= 0) {
                clearInterval(timerInterval);
                submitQuiz();
                alert('Hết giờ làm bài!');
            }
        }, 1000);

        // --- Grading Logic ---
        function submitQuiz() {
            clearInterval(timerInterval);
            let totalScore = 0;
            
            // 1. Chấm Phần 1 (10 câu, mỗi câu 0.3 điểm) -> Max 3.0
            const p1_answers = {
                'p1_q1': 'B', 'p1_q2': 'A', 'p1_q3': 'A', 'p1_q4': 'B', 'p1_q5': 'A',
                'p1_q6': 'C', 'p1_q7': 'A', 'p1_q8': 'B', 'p1_q9': 'A', 'p1_q10': 'B'
            };
            
            for (let key in p1_answers) {
                const selected = document.querySelector(`input[name="${key}"]:checked`);
                const qBlock = document.querySelector(`input[name="${key}"]`).closest('.question-block');
                
                if (selected && selected.value === p1_answers[key]) {
                    totalScore += 0.3;
                    qBlock.classList.add('correct-block');
                } else {
                    qBlock.classList.add('wrong-block');
                }
            }

            // 2. Chấm Phần 2 (3 câu, 12 ý, tính điểm theo ý đúng) -> Max 4.0
            // Giả sử mỗi ý đúng được 4/12 = 0.33 điểm (làm tròn logic đơn giản)
            const p2_answers = {
                'p2_q11_a': 'True', 'p2_q11_b': 'False', 'p2_q11_c': 'True', 'p2_q11_d': 'True',
                'p2_q12_a': 'True', 'p2_q12_b': 'False', 'p2_q12_c': 'True', 'p2_q12_d': 'True',
                'p2_q13_a': 'False', 'p2_q13_b': 'True', 'p2_q13_c': 'True', 'p2_q13_d': 'False'
            };

            let p2_correct_count = 0;
            for (let key in p2_answers) {
                const selected = document.querySelector(`input[name="${key}"]:checked`);
                // Tô màu đúng sai
                // Logic hiển thị phức tạp hơn, ở đây chỉ tô màu block cha
                if (selected && selected.value === p2_answers[key]) {
                    p2_correct_count++;
                }
            }
            // Tô màu block cha phần 2 (tạm thời)
            ['q11', 'q12', 'q13'].forEach(id => {
                document.getElementById(id).style.border = "1px solid #007bff";
            });
            
            totalScore += (p2_correct_count * (4.0 / 12));

            // 3. Chấm Phần 3 (3 câu, mỗi câu 1.0 điểm) -> Max 3.0
            // Q14: 140
            const q14_val = document.getElementById('p3_q14').value.trim();
            if (q14_val == "140") {
                totalScore += 1.0;
                document.getElementById('q14').classList.add('correct-block');
            } else {
                document.getElementById('q14').classList.add('wrong-block');
            }

            // Q15: 162.1 (chấp nhận 162 -> 162.2)
            const q15_val = parseFloat(document.getElementById('p3_q15').value.replace(',', '.'));
            if (q15_val >= 162.0 && q15_val <= 162.2) {
                totalScore += 1.0;
                document.getElementById('q15').classList.add('correct-block');
            } else {
                document.getElementById('q15').classList.add('wrong-block');
            }

            // Q16: 1/8
            const q16_val = document.getElementById('p3_q16').value.trim();
            if (q16_val === "1/8" || q16_val === "0.125") {
                totalScore += 1.0;
                document.getElementById('q16').classList.add('correct-block');
            } else {
                document.getElementById('q16').classList.add('wrong-block');
            }

            // --- Finalize ---
            // Hiển thị điểm
            document.getElementById('finalScore').innerText = totalScore.toFixed(2);
            document.getElementById('resultBoard').style.display = 'block';
            
            // Hiển thị lời giải
            const explanations = document.querySelectorAll('.explanation');
            explanations.forEach(exp => exp.style.display = 'block');

            // Disable inputs
            const allInputs = document.querySelectorAll('input');
            allInputs.forEach(input => input.disabled = true);
            document.querySelector('.btn-submit').style.display = 'none';

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>
